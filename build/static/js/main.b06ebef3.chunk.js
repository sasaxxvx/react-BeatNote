(this.webpackJsonpjammming=this.webpackJsonpjammming||[]).push([[0],{30:function(e,t,a){e.exports=a(84)},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){"use strict";a.r(t);var n,s,r,i=a(0),c=a.n(i),o=a(26),l=a.n(o),u=(a(35),a(3)),h=a(4),m=a(1),p=a(6),d=a(5),f=(a(36),a(37),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={term:""},n.search=n.search.bind(Object(m.a)(n)),n.handleTermChange=n.handleTermChange.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"search",value:function(){this.props.onSearch(this.state.term)}},{key:"handleTermChange",value:function(e){this.setState({term:e.target.value})}},{key:"render",value:function(){return c.a.createElement("div",{className:"SearchBar"},c.a.createElement("input",{placeholder:"Enter A Song, Album, or Artist",onChange:this.handleTermChange}),c.a.createElement("button",{className:"SearchButton",onClick:this.search},"SEARCH"))}}]),a}(c.a.Component)),y=(a(38),a(39),a(40),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).addTrack=n.addTrack.bind(Object(m.a)(n)),n.removeTrack=n.removeTrack.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"renderAction",value:function(){return this.props.isRemoval?c.a.createElement("button",{className:"Track-action",onClick:this.removeTrack},"-"):c.a.createElement("button",{className:"Track-action",onClick:this.addTrack},"+")}},{key:"addTrack",value:function(){this.props.onAdd(this.props.track)}},{key:"removeTrack",value:function(){this.props.onRemove(this.props.track)}},{key:"render",value:function(){return c.a.createElement("div",{className:"Track"},c.a.createElement("div",{className:"Track-information"},c.a.createElement("h3",null,this.props.track.name),c.a.createElement("p",null,this.props.track.artist," | ",this.props.track.album," ")),this.renderAction())}}]),a}(c.a.Component)),v=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"TrackList"},this.props.tracks.map((function(t){return c.a.createElement(y,{track:t,key:t.id,onAdd:e.props.onAdd,isRemoval:e.props.isRemoval,onRemove:e.props.onRemove})})))}}]),a}(c.a.Component),k=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:"SearchResults"},c.a.createElement("h2",null," Results"),c.a.createElement(v,{tracks:this.props.searchResults,onAdd:this.props.onAdd,isRemoval:!1}))}}]),a}(c.a.Component),b=(a(41),a(27)),T=a.n(b),g=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleNameChange=n.handleNameChange.bind(Object(m.a)(n)),n.checkIfPlaylistTracks=n.checkIfPlaylistTracks.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"handleNameChange",value:function(e){this.props.onNameChange(e.target.value)}},{key:"checkIfPlaylistTracks",value:function(){return 0===this.props.playlistTracks.length}},{key:"render",value:function(){return c.a.createElement("div",{className:"Playlist"},c.a.createElement("input",{value:this.props.playlistName,placeholder:"New playlist",onChange:this.handleNameChange}),c.a.createElement(v,{tracks:this.props.playlistTracks,isRemoval:!0,onRemove:this.props.onRemove}),c.a.createElement(T.a,{loading:this.props.open,spinnerColor:"black",bgColor:"transparent",textColor:"#676767",text:"saving"}),c.a.createElement("button",{disabled:this.checkIfPlaylistTracks()||!this.props.playlistName,className:"Playlist-save",onClick:this.props.onSave},"SAVE TO SPOTIFY"))}}]),a}(c.a.Component),j={getCurrentUserId:function(){var e=j.getAccessToken(),t={Authorization:"Bearer ".concat(e)};return s?new Promise((function(e,t){e(s)})):fetch("https://api.spotify.com/v1/me",{headers:t}).then((function(e){return e.json()})).then((function(e){return s=e.id}))},getCurrentUserName:function(){var e=j.getAccessToken(),t={Authorization:"Bearer ".concat(e)};return r?new Promise((function(e,t){e(r)})):fetch("https://api.spotify.com/v1/me",{headers:t}).then((function(e){return e.json()})).then((function(e){return r=e.display_name}))},getAccessToken:function(){if(n)return n;var e=window.location.href.match(/access_token=([^&]*)/),t=window.location.href.match(/expires_in=([^&]*)/);if(e&&t){n=e[1];var a=Number(t[1]);return window.setTimeout((function(){return n=""}),1e3*a),window.history.pushState("Access Token",null,"/"),n}var s="https://accounts.spotify.com/authorize?client_id=".concat("3c6b1fbc75e34b9a82ee4da61c734df5","&response_type=token&scope=playlist-modify-public&redirect_uri=").concat("http://react-beatnote.surge.sh");window.location=s},search:function(e){var t=j.getAccessToken();return fetch("https://api.spotify.com/v1/search?type=track&q=".concat(e),{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).then((function(e){return e.tracks?e.tracks.items.map((function(e){return{id:e.id,name:e.name,artists:e.artists[0].name,album:e.album.name,uri:e.uri}})):[]}))},savePlaylist:function(e,t){if(!e||!t.length)return new Error;var a=j.getAccessToken(),n={Authorization:"Bearer ".concat(a)};return j.getCurrentUserId().then((function(a){return fetch("https://api.spotify.com/v1/users/".concat(a,"/playlists"),{headers:n,method:"POST",body:JSON.stringify({name:e})}).then((function(e){return e.json()})).then((function(e){var s=e.id;return fetch("https://api.spotify.com/v1/users/".concat(a,"/playlists/").concat(s,"/tracks"),{headers:n,method:"POST",body:JSON.stringify({uris:t})})}))}))},getUserPlaylists:function(){var e=j.getAccessToken();return j.getCurrentUserId().then((function(t){return fetch("https://api.spotify.com/v1/users/".concat(t,"/playlists"),{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()})).then((function(e){return e.items?e.items.map((function(e){return{id:e.id,name:e.name,uri:e.uri,url:e.images[0].url,byUser:e.owner.display_name}})):[]}))}))}},N=j,O=(a(83),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:"PlaylistList"},c.a.createElement("div",{className:"PlaylistList_header"},c.a.createElement("h2",null,"Local Playlists"),c.a.createElement("button",{onClick:this.props.onShow,className:"showButton"},"SHOW PLAYLISTS")),c.a.createElement("div",{className:"PlaylistList-body"},this.props.playlistList.map((function(e){return c.a.createElement("div",{key:e.id,className:"eachPlaylist"},c.a.createElement("img",{src:e.url,className:"playlistImg"}),c.a.createElement("div",{className:"playlistText"},c.a.createElement("h3",null,e.name),c.a.createElement("p",{className:"userName"},"by ",e.byUser)))}))))}}]),a}(c.a.Component)),E=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={open:null,searchResults:[],playlistName:"",playlistTracks:[],playlistList:[],user:null},n.addTrack=n.addTrack.bind(Object(m.a)(n)),n.removeTrack=n.removeTrack.bind(Object(m.a)(n)),n.updatePlaylistName=n.updatePlaylistName.bind(Object(m.a)(n)),n.savePlaylist=n.savePlaylist.bind(Object(m.a)(n)),n.search=n.search.bind(Object(m.a)(n)),n.showPlaylistList=n.showPlaylistList.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"addTrack",value:function(e){var t=this.state.playlistTracks;t.find((function(t){return t.id===e.id}))||(t.push(e),this.setState({playlistTracks:t}))}},{key:"removeTrack",value:function(e){var t=this.state.playlistTracks;t=t.filter((function(t){return t.id!==e.id})),this.setState({playlistTracks:t})}},{key:"updatePlaylistName",value:function(e){this.setState({playlistName:e})}},{key:"search",value:function(e){var t=this;N.getCurrentUserName().then((function(e){console.log(e),t.setState({user:e})})),N.search(e).then((function(e){t.setState({searchResults:e})}))}},{key:"checkIfGotUserId",value:function(){var e=this;N.getCurrentUserId().then((function(t){return e.setState({user:t})}))}},{key:"savePlaylist",value:function(){var e=this;this.setState({open:!0});var t=this.state.playlistTracks.map((function(e){return e.uri}));N.savePlaylist(this.state.playlistName,t).then((function(){e.setState({playlistName:"",playlistTracks:[],open:!1}),e.showPlaylistList()}))}},{key:"showPlaylistList",value:function(){var e=this;N.getUserPlaylists().then((function(t){e.setState({playlistList:t})}))}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("h1",null,"BeatNote"),c.a.createElement("div",{className:"App"},this.state.user&&c.a.createElement("h4",{className:"greeting"},"Hi, ",this.state.user),c.a.createElement(f,{onSearch:this.search}),c.a.createElement("div",{className:"App-playlist-playlistList"},c.a.createElement(k,{searchResults:this.state.searchResults,onAdd:this.addTrack}),c.a.createElement(g,{playlistName:this.state.playlistName,playlistTracks:this.state.playlistTracks,onRemove:this.removeTrack,onNameChange:this.updatePlaylistName,onSave:this.savePlaylist,open:this.state.open}),c.a.createElement(O,{onShow:this.showPlaylistList,playlistList:this.state.playlistList}))))}}]),a}(c.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[30,1,2]]]);
//# sourceMappingURL=main.b06ebef3.chunk.js.map